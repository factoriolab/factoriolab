<lab-dropdown
  [controlId]="controlId()"
  [border]="false"
  (open)="open()"
  (save)="save()"
>
  @if (value()?.beltId; as beltId) {
    @let stack = value()?.stack;
    <lab-icon
      [value]="beltId"
      type="item"
      [text]="stack?.gt(rational.one) ? stack?.toString() : ''"
    ></lab-icon>
  }

  <ng-template #content>
    <div class="flex">
      <lab-input-number
        class="w-0 grow"
        rounded="start"
        [minimum]="rational.one"
        [maximum]="stack()"
        [buttons]="true"
        labTooltip="beltSelect.stackTooltip"
        [ngModel]="editValue()?.stack"
        (ngModelChange)="setStack($event)"
      ></lab-input-number>
      <lab-select
        class="-ms-px"
        rounded="end"
        [iconOnly]="true"
        [options]="settingsStore.options().belts"
        [ngModel]="editValue()?.beltId"
        (ngModelChange)="setBelt($event)"
      ></lab-select>
    </div>
  </ng-template>
</lab-dropdown>
