<aside #aside="labAside" labAside></aside>
<div
  role="none"
  class="fixed z-1 hidden h-dvh w-dvw bg-gray-950/75 xl:hidden"
  [class.hidden]="!aside.open()"
  (click)="aside.open.set(false)"
></div>
<div
  class="flex h-full flex-col transition-[margin]"
  [class.xl:ms-80]="!aside.xlHidden()"
>
  <header
    labHeader
    [(asideOpen)]="aside.open"
    [(asideXlHidden)]="aside.xlHidden"
  ></header>
  <main class="flex grow flex-col">
    <lab-objectives></lab-objectives>

    <div class="grow px-1 sm:px-3 lg:px-6">
      <h2 class="mb-1 hidden text-2xl font-light xl:block">Factory</h2>
      <div class="relative">
        <span
          class="absolute bottom-0 -left-1 w-1 border-b-2 border-gray-700 sm:-left-3 sm:w-3 lg:-left-6 lg:w-6"
        ></span>
        <lab-tabs [tabs]="tabs"></lab-tabs>
        <span
          class="absolute -right-1 bottom-0 w-1 border-b-2 border-gray-700 sm:-right-3 sm:w-3 lg:-right-6 lg:w-6"
        ></span>
      </div>
      <router-outlet></router-outlet>
    </div>

    <div
      class="flex justify-between border-t border-gray-700 p-2 sm:p-3 lg:p-6"
    >
      <span>
        @if (result().resultType === 'solved') {
          {{
            'app.simplexSolved'
              | translate
                : {
                    time: result().time,
                    cost: result().cost?.toFixedString(),
                  }
          }}
        } @else {
          {{ 'options.simplexResultType.' + result().resultType | translate }}
        }
      </span>
      <span>{{ fileClient.version$ | async }}</span>
    </div>
  </main>
</div>
