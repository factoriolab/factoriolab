<aside #aside="labAside" labAside></aside>
<div
  role="none"
  class="fixed z-2 hidden h-dvh w-dvw bg-gray-950/75 xl:hidden"
  [class.hidden]="!aside.open()"
  (click)="aside.open.set(false)"
></div>
<div
  class="flex h-full flex-col transition-[margin]"
  [class.xl:ms-80]="!aside.xlHidden()"
>
  <header
    labHeader
    [(asideOpen)]="aside.open"
    [(asideXlHidden)]="aside.xlHidden"
  ></header>
  <main class="flex grow flex-col">
    <lab-objectives></lab-objectives>

    <div class="flex grow flex-col px-1 sm:px-3 lg:px-6">
      <h2 class="mb-1 hidden text-2xl font-light xl:block">Factory</h2>
      <div class="relative mb-1 sm:mb-2">
        <lab-tabs [tabs]="tabs"></lab-tabs>
      </div>
      <div class="grow overflow-x-auto">
        <router-outlet #ro="outlet"></router-outlet>
        @if (!ro.isActivated) {
          <div class="flex h-full items-center justify-center">
            <img
              src="factoriolab.gif"
              alt="FactorioLab"
              height="174"
              width="194"
            />
          </div>
        }
      </div>
    </div>

    <div
      class="flex justify-between border-t border-gray-600 p-1 sm:p-3 lg:p-6"
    >
      <span>
        @if (result().resultType === 'solved') {
          {{
            'app.simplexSolved'
              | translate
                : {
                    time: result().time,
                    cost: result().cost?.toLocaleString(),
                  }
          }}
        } @else {
          {{ 'options.simplexResultType.' + result().resultType | translate }}
        }
      </span>
      <span>{{ fileClient.version$ | async }}</span>
    </div>
  </main>
</div>
